<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>E-pasta apstiprināšana</title>

    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
    <script>
        const email = 'test@test.com';
        const Http = new XMLHttpRequest();
        const url = 'https://localhost:5001/api/v1/tempemailmodels/verify/' + email;

        function verifyUser() {
            Http.open("POST", url, true);
            Http.send();

            Http.onreadystatechange = (e) => {
                if (Http.readyState === 4) {
                    if (Http.status === 200) {
                        console.log('successful');
                        document.getElementById('verifiedMsg').style.display = 'block';
                    }
                    else {
                        console.log('failed');
                        document.getElementById('errorMsg').style.display = 'block';
                    }
                }
            }
        }

    </script>
</head>
<body>
    <h3 style="text-align:center;margin-bottom:20px;">E-pasta adreses apstiprināšana</h3>
    <p style="text-align:center;">Lai apstiprinātu savu e-pasta adresi, nospiediet šo pogu.</p>
    <button style="display:block;margin:auto;padding:7px;border-radius:5px;border-width:0px;width:150px;height:50px;font-size:large;background-color:Highlight;color:white" onclick="verifyUser();">Apstiprināt</button> <!-- onclick="verifyUser();"-->
    <p style="text-align:center;margin-bottom:20px;">Ja jūs neatpazīstat šo darbību, tad vienkārši ignorējiet šo e-pasta ziņojumu.</p>
    <p style="text-align:center;margin-bottom:20px;"><a href="https://www.google.com">Stundu izmaiņu mājaslapa</a></p>

    <div id="errorMsg" style="text-align:center;display:none;margin:auto;">
        <p style="color: red;">Kļūda, neizdevās verificēt lietotāju. </p>
    </div>
    
    <div id="verifiedMsg" style="margin:auto;border:5px solid green;border-width:5px;text-align:center;padding:20px;max-width:300px;display:none;">
        <h1 style="color:green;">Jūsu e-pasts ir verificēts</h1>
    </div>
</body>
</html>